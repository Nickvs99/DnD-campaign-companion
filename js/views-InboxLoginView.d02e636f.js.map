{"version":3,"file":"js/views-InboxLoginView.d02e636f.js","mappings":"qQAIeA,IAAI,eAAeC,YAAY,gBAAgBC,KAAK,Q,GACpDF,IAAI,SAASC,YAAY,UAAUC,KAAK,Q,UAE/CC,EAAAA,EAAAA,GAAuB,cAAf,UAAM,K,SAGUC,MAAM,mB,oGARtCC,EAAAA,EAAAA,IAUiBC,EAAAA,CAVDF,MAAM,yBAAuB,C,kBACzC,IAKO,CALMG,EAAAA,cAIc,iBAJF,WAAzBC,EAAAA,EAAAA,IAKO,Q,MALyBC,SAAM,oBAAEC,EAAAA,UAAAA,EAAAA,YAAAA,IAAUN,MAAM,c,EACpDD,EAAAA,EAAAA,GAAoE,QAApEQ,EAAoE,WACpER,EAAAA,EAAAA,GAAwD,QAAxDS,EAAwD,UAExDC,GAAuB,KAGhBN,EAAAA,kBAAe,WAA1BC,EAAAA,EAAAA,IAAsE,MAAtEM,EAAoD,kBAAY,eAChDP,EAAAA,eAAY,WAA5BF,EAAAA,EAAAA,IAA2DU,EAAAA,C,MAA5BC,QAAO,KAAOC,a,kGAYjD,GACIC,KAAM,iBACNC,WAAY,CAAEC,eAAc,aAAEC,SAAQA,EAAAA,YAEtCC,OACI,MAAO,CACHC,cAAc,EACdC,iBAAiB,EACjBP,YAAa,GAErB,EACAQ,QACA,CACIC,eAAeC,GAEXC,KAAKJ,iBAAkB,EAEvBG,EAAME,iBACNF,EAAMG,kBAEN,IAAIC,EAAYH,KAAKI,OAAOC,KAAKC,MAAM,KACnCC,EAASJ,EAAUK,MAAM,GAAI,GAAGC,KAAK,KACrCC,EAAaH,EAAS,cAAeI,EAAAA,EAAAA,UAASX,KAAKY,MAAMC,aAAaC,MAAQd,KAAKY,MAAMG,OAAOD,OAEhGE,EAAahB,KAAKiB,aAAaP,GAEhCM,IAAYE,EAAAA,EAAAA,8BAA6BR,GAEV,KAA5BV,KAAKY,MAAMG,OAAOD,OAAkD,KAAlCd,KAAKY,MAAMC,aAAaC,QAG5Dd,KAAKL,cAAe,EAEpBK,KAAKX,YAAc,wBACb8B,EAAAA,EAAAA,QAAMC,EAAAA,EAAAA,eAAc,IAAK,MAE/BpB,KAAKX,YAAc,wBACb8B,EAAAA,EAAAA,QAAMC,EAAAA,EAAAA,eAAc,KAAM,OAE7BJ,GACChB,KAAKX,YAAc,yBACb8B,EAAAA,EAAAA,QAAMC,EAAAA,EAAAA,eAAc,IAAK,OAK/BpB,KAAKL,cAAe,GAKzBqB,IACCE,EAAAA,EAAAA,8BAA6BR,GAC7BV,KAAKqB,QAAQC,KAAKZ,IAGlBV,KAAKJ,iBAAkB,CAE/B,EAEAqB,aAAaZ,GAET,IAAI,IAAIkB,KAASvB,KAAKqB,QAAQG,YAE1B,GAAInB,IAASkB,EAAM,QACf,OAAO,EAIf,OAAO,CACX,I,QCtFR,MAAME,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://dnd-campaign-companion/./src/views/InboxLoginView.vue","webpack://dnd-campaign-companion/./src/views/InboxLoginView.vue?e8ee"],"sourcesContent":["<template>\r\n\r\n<CenterToScreen class=\"inbox-login-container\">\r\n    <form v-if=\"!showLoadIcon\" v-on:submit=\"onSubmit\" class=\"login-form\">\r\n        <input ref=\"personalCode\" placeholder=\"Personal code\" type=\"text\" />\r\n        <input ref=\"dmCode\" placeholder=\"DM code\" type=\"text\" />\r\n\r\n        <button>Submit</button>\r\n    </form>\r\n\r\n    <div v-if=\"showInvalidCode\" class=\"invalid-message\">Invalid code</div>\r\n    <LoadIcon v-if=\"showLoadIcon\" :message=\"this.loadMessage\"/>\r\n</CenterToScreen>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport CenterToScreen from \"@/components/CenterToScreen.vue\";\r\nimport LoadIcon from \"@/components/LoadIcon.vue\";\r\nimport { prefetchComponentsFromRoutes } from \"@/router/util.js\";\r\nimport { hashCode, randomUniform, sleep } from \"@/util.js\";\r\n\r\nexport default {\r\n    name: \"InboxLoginView\",\r\n    components: { CenterToScreen, LoadIcon },\r\n\r\n    data() {\r\n        return {\r\n            showLoadIcon: false,\r\n            showInvalidCode: false,\r\n            loadMessage: \"\",\r\n        };\r\n    },\r\n    methods:\r\n    {\r\n        async onSubmit(event) {\r\n            \r\n            this.showInvalidCode = false;\r\n            \r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            \r\n            let pathSplit = this.$route.path.split(\"/\");\r\n            let concat = pathSplit.slice(0, -1).join(\"/\");\r\n            let targetSlug = concat + \"/messages/\" + hashCode(this.$refs.personalCode.value + this.$refs.dmCode.value);\r\n            \r\n            let validRoute = this.isValidRoute(targetSlug);\r\n            \r\n            if(validRoute) prefetchComponentsFromRoutes(targetSlug);\r\n\r\n            if (!(this.$refs.dmCode.value === \"\" && this.$refs.personalCode.value === \"\"))\r\n            {\r\n                // Show artificial loading screen\r\n                this.showLoadIcon = true,\r\n\r\n                this.loadMessage = \"Encrypting code\";\r\n                await sleep(randomUniform(500, 750));\r\n\r\n                this.loadMessage = \"Validating code\";\r\n                await sleep(randomUniform(1500, 3500));\r\n\r\n                if(validRoute) {\r\n                    this.loadMessage = \"Fetching message\";\r\n                    await sleep(randomUniform(500, 750));                    \r\n                }\r\n                else {\r\n                    // Only disable the loadicon on invalid routes, otherwise the\r\n                    // fade on route change would not look good\r\n                    this.showLoadIcon = false;\r\n                }\r\n            }\r\n\r\n\r\n            if(validRoute) {\r\n                prefetchComponentsFromRoutes(targetSlug);\r\n                this.$router.push(targetSlug);\r\n            }\r\n            else{\r\n                this.showInvalidCode = true;\r\n            }\r\n        },\r\n\r\n        isValidRoute(path) {\r\n\r\n            for(let route of this.$router.getRoutes())\r\n            {\r\n                if (path === route[\"path\"]) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n    } \r\n};\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.inbox-login-container {\r\n    max-width: 15rem;\r\n}\r\n\r\n.login-form{\r\n    display: flex;\r\n    flex-direction: column;\r\n    row-gap: 0.5rem;\r\n}\r\n\r\n.invalid-message {\r\n    text-align: center;\r\n\r\n    font-size: 1.25rem;\r\n    font-weight: bold;\r\n    \r\n    margin: 1em;\r\n}\r\n\r\n</style>","import { render } from \"./InboxLoginView.vue?vue&type=template&id=2e0fe3f8&scoped=true\"\nimport script from \"./InboxLoginView.vue?vue&type=script&lang=js\"\nexport * from \"./InboxLoginView.vue?vue&type=script&lang=js\"\n\nimport \"./InboxLoginView.vue?vue&type=style&index=0&id=2e0fe3f8&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\vansa\\\\Persoonlijk\\\\Programmeren\\\\Projects\\\\dnd-campaign-companion\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2e0fe3f8\"]])\n\nexport default __exports__"],"names":["ref","placeholder","type","_createElementVNode","class","_createBlock","_component_CenterToScreen","$data","_createElementBlock","onSubmit","$options","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_component_LoadIcon","message","loadMessage","name","components","CenterToScreen","LoadIcon","data","showLoadIcon","showInvalidCode","methods","async","event","this","preventDefault","stopPropagation","pathSplit","$route","path","split","concat","slice","join","targetSlug","hashCode","$refs","personalCode","value","dmCode","validRoute","isValidRoute","prefetchComponentsFromRoutes","sleep","randomUniform","$router","push","route","getRoutes","__exports__","render"],"sourceRoot":""}