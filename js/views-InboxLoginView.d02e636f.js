"use strict";(self["webpackChunkdnd_campaign_companion"]=self["webpackChunkdnd_campaign_companion"]||[]).push([[893],{5084:function(e,o,s){s.r(o),s.d(o,{default:function(){return w}});var n=s(3396);const a=e=>((0,n.dD)("data-v-2e0fe3f8"),e=e(),(0,n.Cn)(),e),t={ref:"personalCode",placeholder:"Personal code",type:"text"},i={ref:"dmCode",placeholder:"DM code",type:"text"},d=a((()=>(0,n._)("button",null,"Submit",-1))),r={key:1,class:"invalid-message"};function l(e,o,s,a,l,u){const c=(0,n.up)("LoadIcon"),h=(0,n.up)("CenterToScreen");return(0,n.wg)(),(0,n.j4)(h,{class:"inbox-login-container"},{default:(0,n.w5)((()=>[l.showLoadIcon?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("form",{key:0,onSubmit:o[0]||(o[0]=(...e)=>u.onSubmit&&u.onSubmit(...e)),class:"login-form"},[(0,n._)("input",t,null,512),(0,n._)("input",i,null,512),d],32)),l.showInvalidCode?((0,n.wg)(),(0,n.iD)("div",r,"Invalid code")):(0,n.kq)("",!0),l.showLoadIcon?((0,n.wg)(),(0,n.j4)(c,{key:2,message:this.loadMessage},null,8,["message"])):(0,n.kq)("",!0)])),_:1})}s(7658);var u=s(4474),c=s(7378),h=s(3381),p=s(8245),m={name:"InboxLoginView",components:{CenterToScreen:u["default"],LoadIcon:c["default"]},data(){return{showLoadIcon:!1,showInvalidCode:!1,loadMessage:""}},methods:{async onSubmit(e){this.showInvalidCode=!1,e.preventDefault(),e.stopPropagation();let o=this.$route.path.split("/"),s=o.slice(0,-1).join("/"),n=s+"/messages/"+(0,p.hashCode)(this.$refs.personalCode.value+this.$refs.dmCode.value),a=this.isValidRoute(n);a&&(0,h.prefetchComponentsFromRoutes)(n),""===this.$refs.dmCode.value&&""===this.$refs.personalCode.value||(this.showLoadIcon=!0,this.loadMessage="Encrypting code",await(0,p.sleep)((0,p.randomUniform)(500,750)),this.loadMessage="Validating code",await(0,p.sleep)((0,p.randomUniform)(1500,3500)),a?(this.loadMessage="Fetching message",await(0,p.sleep)((0,p.randomUniform)(500,750))):this.showLoadIcon=!1),a?((0,h.prefetchComponentsFromRoutes)(n),this.$router.push(n)):this.showInvalidCode=!0},isValidRoute(e){for(let o of this.$router.getRoutes())if(e===o["path"])return!0;return!1}}},f=s(89);const g=(0,f.Z)(m,[["render",l],["__scopeId","data-v-2e0fe3f8"]]);var w=g}}]);
//# sourceMappingURL=views-InboxLoginView.d02e636f.js.map